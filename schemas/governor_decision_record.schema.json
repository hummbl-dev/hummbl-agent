{
  "$schema": "https://json-schema.org/draft/2019-09/schema",
  "$id": "https://hummbl.dev/schemas/governor_decision_record.schema.json",
  "title": "HUMMBL Governor Decision Record",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "schema_version",
    "decision_id",
    "request_id",
    "timestamp",
    "governor",
    "decision",
    "action",
    "reason",
    "violated_rule",
    "constraints",
    "halt_required"
  ],
  "properties": {
    "schema_version": {
      "type": "string",
      "const": "1.0.0"
    },
    "decision_id": {
      "type": "string",
      "description": "Stable unique identifier for this decision (UUID v4 recommended)"
    },
    "request_id": {
      "type": "string",
      "description": "Must match the request_id from the inter-agent request"
    },
    "timestamp": {
      "type": "string",
      "format": "date-time",
      "description": "Decision creation time (ISO 8601)"
    },
    "governor": {
      "type": "string",
      "const": "HUMMBL_GOVERNOR"
    },
    "decision": {
      "type": "string",
      "enum": [
        "AUTHORIZE",
        "DENY",
        "REQUEST_CLARIFICATION",
        "ESCALATE",
        "TERMINATE_RUN"
      ]
    },
    "action": {
      "$ref": "./enums/action_codes.json"
    },
    "reason": {
      "$ref": "./enums/reason_codes.json"
    },
    "violated_rule": {
      "$ref": "./enums/violated_rules.json",
      "default": "NONE"
    },
    "constraints": {
      "type": "array",
      "items": {
        "$ref": "./enums/constraint_codes.json"
      },
      "default": []
    },
    "halt_required": {
      "type": "boolean",
      "description": "If true, all subordinate agents MUST halt immediately"
    }
  }
}
